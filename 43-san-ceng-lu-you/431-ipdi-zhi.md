# 三层路由的作用

* 二层交换采用了VLAN以后，VLAN间通信需要三层路由实现互通

# IPv4帧结构

* 版本号：0100表示IPv4，0110表示IPv6
* 首部长度：IP包头长度
* 服务类型\(TOS\)：设置数据包优先级
* 总长度：IP包最大长度65535字节
* 标识、标志、片偏移：联合使用，对大的上层数据包进行分段操作
* 生存时间\(TTL\)：每经过1个路由器，TTL减1，避免IP包在网络中不停被转发
* 协议：标识所处OSI上层使用的协议，例如TCPorUDP
* 首部校验和：校验IP包头，正常是全1
* 填充项：保证包头长度是32的倍数

# ![](/assets/Figure-0145-142.jpg)IP地址

* A/B/C类可用主机数量：2^24-2$$$$/2^16-2/2^8-2
* 掩码的作用：更精细的将主机号划分出子网
* 掩码计算方法：无法用语言描述。。。
* 无类域间路由CIDR：本质就是将多个C类地址合并成一个子网

![](/assets/Figure-0146-143.jpg)

